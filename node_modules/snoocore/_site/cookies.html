<!DOCTYPE html>
<html>

  <head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Snoocore cookie login</title>

  <meta name="description" content="Snoocore - A minimal and complete JavaScript driver for the Reddit API">
  <meta name="author" content="Trevor Senior">
  <link rel="canonical" href="http://tsenior.com/snoocore/cookies.html">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href='//fonts.googleapis.com/css?family=Raleway:400,300,600' type='text/css'>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/skeleton.css">
  <link rel="stylesheet" href="/css/custom-snoocore.css">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- <link rel="icon" type="image/png" href="dist/images/favicon.png"> -->

</head>


  <body>

    <div class="wrapper">
      <div class="sidebar"><ul>
  <li><a href="index.html">Home</a></li>

  <li><a href="features.html">Features</a></li>

  <li>Getting Started
    <ul>
      <li><a href="install.html">Install & Include</a></li>
      <li><a href="basicUsage.html">Basic Usage</a></li>
      <li><a href="config.html">Config Options</a></li>
    </ul>
  </li>

  <li><a href="login.html">Login</a>
    <ul>
      <li><a href="oauth.html">OAuth</a></li>
      <ul>
	<li><a href="oauth-script.html">Script</a></li>
	<li><a href="oauth-explicit.html">Explicit</a></li>
	<li><a href="oauth-implicit.html">Implicit</a></li>
      </ul>
  </li>
  <li><a href="cookies.html">Cookie</a></li>
    </ul>
  </li>

  <li>Helpers
    <ul>
      <li><a href="listings.html">Listings</a></li>
    </ul>
  </li>

  <li>Resources
    <ul>
      <li><a href="gotchas.html">Gotcha's</a></li>
      <li><a href="migration.html">Migration Guide</a></li>
      <li><a href="tests.html">Running Tests</a></li>
      <li><a href="advancedUsage.html">Advanced Usage</a></li>
      <li><a href="node-vs-browser.html">Node vs. Browser</a></li>
      <li><a href="promises.html">Promises</a></li>
    </ul>
  </li>
</ul>
</div>
      <div class="my-content"><h1 id="authenticating-with-cookies">Authenticating with Cookies</h1>

<p>Simply apply the basic usage guidelines and make a call to <a href="http://www.reddit.com/dev/api#POST_api_login"><code>POST /api/login</code></a>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">loginPromise</span> <span class="o">=</span> <span class="nx">reddit</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">login</span><span class="p">.</span><span class="nx">post</span><span class="p">({</span>
    <span class="nx">user</span><span class="o">:</span> <span class="s1">&#39;yourUsername&#39;</span><span class="p">,</span>
    <span class="nx">passwd</span><span class="o">:</span> <span class="s1">&#39;yourPassword&#39;</span><span class="p">,</span>
    <span class="nx">rem</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">api_type</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span>
<span class="p">});</span>
</code></pre></div>
<p>Note that the parameters <code>api_type</code> and <code>rem</code> are <em>required</em>. Snoocore does not tamper with the standard Reddit API calls in any way.</p>

<h2 id="pretty-login">Pretty Login</h2>

<p>The above works, but the url parameters <code>rem</code> and <code>api_type</code> are a little clunky for the average user. Snoocore provides an alternate login function that can be used:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">loginPromise</span> <span class="o">=</span> <span class="nx">reddit</span><span class="p">.</span><span class="nx">login</span><span class="p">({</span>
    <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;yourUsername&#39;</span><span class="p">,</span>
    <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;yourPasswd&#39;</span>
<span class="p">});</span>
</code></pre></div>
<p>If you specify the login options in the initial config, it can be used without options:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">reddit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Snoocore</span><span class="p">({</span>
    <span class="nx">userAgent</span><span class="o">:</span> <span class="s1">&#39;logonTest&#39;</span><span class="p">,</span>
    <span class="nx">login</span><span class="o">:</span> <span class="p">{</span> <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;yourUsername&#39;</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;yourPassword&#39;</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">loginPromise</span> <span class="o">=</span> <span class="nx">reddit</span><span class="p">.</span><span class="nx">login</span><span class="p">();</span>
</code></pre></div>
<p><sub>If needed, rem and api_type can be passed in as well. They default to <strong>true</strong> and <strong>json</strong> respectively.</sub></p>

<h2 id="logout">Logout</h2>

<p>A function <code>logout</code> is provided if the functionality is needed.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">logoutPromise</span> <span class="o">=</span> <span class="nx">reddit</span><span class="p">.</span><span class="nx">logout</span><span class="p">();</span>
</code></pre></div>
<h2 id="modhash-/-cookie-login">Modhash / Cookie login</h2>

<p>It is also possible to login with a modhash &amp; cookie:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">loginPromise</span> <span class="o">=</span> <span class="nx">reddit</span><span class="p">.</span><span class="nx">login</span><span class="p">({</span>
    <span class="nx">modhash</span><span class="o">:</span> <span class="s1">&#39;yourModhash&#39;</span><span class="p">,</span>
    <span class="nx">cookie</span><span class="o">:</span> <span class="s1">&#39;yourCookie&#39;</span>
<span class="p">});</span>
</code></pre></div>
<p>You can get the modhash and cookie when logging in with the username and password:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">loginPromise</span> <span class="o">=</span> <span class="nx">reddit</span><span class="p">.</span><span class="nx">login</span><span class="p">({</span>
    <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;yourUsername&#39;</span><span class="p">,</span>
    <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;yourPasswd&#39;</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">modhash</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">json</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">cookie</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Or get the modhash and the <code>reddit_session</code> cookie value from an existing session elsewhere (browser, etc.)</p>
</div>
    </div>

  </body>
</html>
